/* Black Studio TinyMCE Widget - v2.0.0 */
var tinyMCEPreInit,wpActiveEditor;!function(a){function b(b){if(a("#"+b).addClass("mceEditor"),"object"==typeof tinyMCE&&"function"==typeof tinyMCE.execCommand){c(b),tinyMCEPreInit.mceInit[b]=tinyMCEPreInit.mceInit["black-studio-tinymce-widget"],tinyMCEPreInit.mceInit[b].selector="#"+b;try{tinymce.init(tinymce.extend({},tinyMCEPreInit.mceInit["black-studio-tinymce-widget"],tinyMCEPreInit.mceInit[b])),tinyMCE.execCommand("mceAddControl",!1,b)}catch(d){alert(d)}null!==tinyMCE.get(b)&&"function"==typeof tinyMCE.get(b).on&&tinyMCE.get(b).on("keyup change",function(){var c=tinyMCE.get(b).getContent();a("textarea#"+b).val(c).change()})}}function c(b){if("object"==typeof tinyMCE&&"function"==typeof tinyMCE.execCommand&&null!==tinyMCE.get(b)&&"function"==typeof tinyMCE.get(b).getContent){var c=tinyMCE.get(b).getContent();tinyMCE.get(b).remove(),a("textarea#"+b).val(c)}}function d(b){a("div.widget-inside:has(#"+b+") input[id^=widget-black-studio-tinymce][id$=type][value=visual]").each(function(){0===a("div.widget:has(#"+b+") :animated").size()&&null===tinyMCE.get(b)&&a("#"+b).is(":visible")?a("a[id^=widget-black-studio-tinymce][id$=tmce]",a(this).closest("div.widget-inside")).click():null===tinyMCE.get(b)?setTimeout(function(){d(b),b=null},100):a("a[id^=widget-black-studio-tinymce][id$=tmce]",a(this).closest("div.widget-inside")).click()})}function e(b){a("div.widget-inside:has(#"+b+") input[id^=widget-black-studio-tinymce][id$=type][value=visual]").each(function(){0===a.active&&null===tinyMCE.get(b)&&a("#"+b).is(":visible")?a("a[id^=widget-black-studio-tinymce][id$=tmce]",a(this).closest("div.widget-inside")).click():a("div.widget:has(#"+b+") div.widget-inside").is(":visible")&&null===tinyMCE.get(b)&&setTimeout(function(){e(b),b=null},100)})}a(document).ready(function(){if(a(document).on("click","div.widget:has(textarea[id^=widget-black-studio-tinymce]) .widget-title, div.widget:has(textarea[id^=widget-black-studio-tinymce]) a.widget-action",function(){var b=a(this).closest("div.widget"),f=a("textarea[id^=widget-black-studio-tinymce]",b);if(a('[name="'+a("#"+f.attr("id")).attr("name")+'"]').size()>1){var g=a("div.widget-inside",b);0===a("div.error",g).length&&g.prepend('<div class="error"><strong>'+black_studio_tinymce_local.error_duplicate_id+"</strong></div>")}a("input[name=savewidget]",b).on("click",function(){var b=a(this).closest("div.widget"),d=a("textarea[id^=widget-black-studio-tinymce]",b);null!==tinyMCE.get(d.attr("id"))&&c(d.attr("id")),a(this).unbind("ajaxSuccess").ajaxSuccess(function(){var b=a("textarea[id^=widget-black-studio-tinymce]",a(this).closest("div.widget-inside"));e(b.attr("id"))})}),a("#wpbody-content").css("overflow","visible"),b.css("position","relative").css("z-index","100000"),d(f.attr("id")),a(".insert-media",b).data("editor",f.attr("id"))}),a("div.widget[id*=black-studio-tinymce] input[name=savewidget]").on("click",function(){var b=a(this).closest("div.widget"),d=a("textarea[id^=widget-black-studio-tinymce]",b);null!==tinyMCE.get(d.attr("id"))&&c(d.attr("id")),a(this).unbind("ajaxSuccess").ajaxSuccess(function(){var b=a("textarea[id^=widget-black-studio-tinymce]",a(this).closest("div.widget-inside"));e(b.attr("id"))})}),a(document).on("click","a[id^=widget-black-studio-tinymce][id$=tmce]",function(){var c=a(this).closest("div.widget-inside,div.panel-dialog"),d=a("div[id^=wp-widget-black-studio-tinymce][id$=-wrap]",c),e=a("textarea[id^=widget-black-studio-tinymce]",c).attr("id");tinymce.DOM.removeClass(d,"html-active"),tinymce.DOM.addClass(d,"tmce-active"),a("input[id^=widget-black-studio-tinymce][id$=type]",c).val("visual"),b(e)}),a(document).on("click","a[id^=widget-black-studio-tinymce][id$=html]",function(){var b=a(this).closest("div.widget-inside,div.panel-dialog"),d=a("div[id^=wp-widget-black-studio-tinymce][id$=-wrap]",b),e=a("textarea[id^=widget-black-studio-tinymce]",b).attr("id");a("input[id^=widget-black-studio-tinymce][id$=type]",b).val("visual"),tinymce.DOM.removeClass(d,"tmce-active"),tinymce.DOM.addClass(d,"html-active"),a("input[id^=widget-black-studio-tinymce][id$=type]",b).val("html"),c(e)}),a(document).on("click",".wp-media-buttons a",function(){var b=a(this).closest("div.widget-inside");wpActiveEditor=a("textarea[id^=widget-black-studio-tinymce]",b).attr("id")}),a("body.widgets_access").size()>0){var f=a("textarea[id^=widget-black-studio-tinymce]");d(f.attr("id"))}})}(jQuery);