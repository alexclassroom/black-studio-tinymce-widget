/*! Black Studio TinyMCE Widget - v2.0.0 - JS */
var tinyMCEPreInit,edCanvas,wpActiveEditor;!function(a){function b(b){if(a("#"+b).addClass("mceEditor"),"object"==typeof tinyMCE&&"function"==typeof tinyMCE.execCommand)if(c(b),"object"==typeof tinyMCEPreInit.mceInit["black-studio-tinymce-widget"]){tinyMCEPreInit.mceInit[b]=tinyMCEPreInit.mceInit["black-studio-tinymce-widget"],tinyMCEPreInit.mceInit[b].elements=b;try{tinymce.init(tinymce.extend({},tinyMCEPreInit.mceInit["black-studio-tinymce-widget"],tinyMCEPreInit.mceInit[b]))}catch(d){alert(d)}}else tinyMCE.execCommand("mceAddControl",!1,b)}function c(b){if("object"==typeof tinyMCE&&"function"==typeof tinyMCE.execCommand&&"object"==typeof tinyMCE.get(b)){var c=tinyMCE.get(b).getContent();tinyMCE.execCommand("mceRemoveControl",!1,b),a("textarea#"+b).val(c)}}function d(b){a("div.widget-inside:has(#"+b+") input[id^=widget-black-studio-tinymce][id$=type][value=visual]").each(function(){0===a("div.widget:has(#"+b+") :animated").size()&&"object"!=typeof tinyMCE.get(b)&&a("#"+b).is(":visible")?a("a[id^=widget-black-studio-tinymce][id$=visual]",a(this).closest("div.widget-inside")).click():"object"!=typeof tinyMCE.get(b)?setTimeout(function(){d(b),b=null},100):a("a[id^=widget-black-studio-tinymce][id$=visual]",a(this).closest("div.widget-inside")).click()})}function e(b){a("div.widget-inside:has(#"+b+") input[id^=widget-black-studio-tinymce][id$=type][value=visual]").each(function(){0===a.active&&"object"!=typeof tinyMCE.get(b)&&a("#"+b).is(":visible")?a("a[id^=widget-black-studio-tinymce][id$=visual]",a(this).closest("div.widget-inside")).click():a("div.widget:has(#"+b+") div.widget-inside").is(":visible")&&"object"!=typeof tinyMCE.get(b)&&setTimeout(function(){e(b),b=null},100)})}a(document).ready(function(){if(a("div.widget:has(textarea[id^=widget-black-studio-tinymce]) a.widget-action").live("click",function(b){b.preventDefault();var c=a(this).closest("div.widget"),e=a("textarea[id^=widget-black-studio-tinymce]",c);a("#wpbody-content").css("overflow","visible"),c.css("position","relative").css("z-index","100"),d(e.attr("id"))}),a(document).data("events").click.unshift(a(document).data("events").click.pop()),a("div.widget[id*=black-studio-tinymce] input[name=savewidget]").live("click",function(b){b.preventDefault();var d=a(this).closest("div.widget"),f=a("textarea[id^=widget-black-studio-tinymce]",d);"object"==typeof tinyMCE.get(f.attr("id"))&&c(f.attr("id")),a(this).unbind("ajaxSuccess").ajaxSuccess(function(){var b=a("textarea[id^=widget-black-studio-tinymce]",a(this).closest("div.widget-inside"));e(b.attr("id"))})}),a(document).data("events").click.unshift(a(document).data("events").click.pop()),a("a[id^=widget-black-studio-tinymce][id$=visual]").live("click",function(c){c.preventDefault();var d=a(this).closest("div.widget-inside");a("input[id^=widget-black-studio-tinymce][id$=type]",d).val("visual"),a(this).addClass("active"),a("a[id^=widget-black-studio-tinymce][id$=html]",d).removeClass("active"),b(a("textarea[id^=widget-black-studio-tinymce]",d).attr("id"))}),a("a[id^=widget-black-studio-tinymce][id$=html]").live("click",function(b){b.preventDefault();var d=a(this).closest("div.widget-inside");a("input[id^=widget-black-studio-tinymce][id$=type]",d).val("html"),a(this).addClass("active"),a("a[id^=widget-black-studio-tinymce][id$=visual]",d).removeClass("active"),c(a("textarea[id^=widget-black-studio-tinymce]",d).attr("id"))}),a(".editor_media_buttons a").live("click",function(){var b=a(this).closest("div.widget-inside");edCanvas=a("textarea[id^=widget-black-studio-tinymce]",b).get(),wpActiveEditor=a("textarea[id^=widget-black-studio-tinymce]",b).attr("id")}),a("body.widgets_access").size()>0){var f=a("textarea[id^=widget-black-studio-tinymce]");d(f.attr("id"))}})}(jQuery);